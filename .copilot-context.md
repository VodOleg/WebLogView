# Copilot Context - WebLogView Project

**Last Updated:** December 5, 2025

## Project Overview
WebLogView is a cross-platform, web-based log viewer with real-time file monitoring. It's designed as a self-hosted alternative to BareTail that works on Windows, macOS, and Linux.

## Tech Stack
- **Backend:** Go 1.21+
  - gorilla/websocket for WebSocket communication
  - fsnotify for file system monitoring
- **Frontend:** Preact (with virtual scrolling)
- **Communication:** WebSocket for real-time updates + HTTP for static files

## Project Structure
```
WebLogView/
├── cmd/
│   └── main.go             # Application entry point
├── internal/
│   ├── config/             # Application configuration
│   │   └── config.go
│   ├── server/             # HTTP server and API endpoints
│   │   └── server.go
│   ├── watcher/            # File system monitoring (fsnotify)
│   │   └── watcher.go
│   └── websocket/          # WebSocket hub and client management
│       ├── client.go
│       └── hub.go
├── DESIGN.md               # Detailed architecture documentation
├── README.md               # Quick start guide
├── go.mod                  # Go module dependencies
└── Makefile               # Build automation
```

## Key Features
- Real-time log file monitoring
- WebSocket-based log streaming
- Virtual scrolling for large files
- Regex filtering support
- File rotation handling
- Auto-opens browser on startup

## Default Configuration
- Port: 8080
- Host: localhost
- Auto-browser: enabled

## Recent Changes
- **Dec 5, 2025:** Updated frontend stack from Vanilla JS to Preact in DESIGN.md
- **Dec 5, 2025:** Created main entry point at `cmd/main.go`
- **Dec 5, 2025:** Set up complete Preact frontend with Vite build system in `web/` directory
  - Created components: App, Header, LogViewer
  - Implemented WebSocket hook with auto-reconnect
  - Added virtual scrolling with react-window
  - Configured Vite with proxy to Go backend
  - Fixed IPv6/IPv4 localhost issue in Vite proxy config
- **Dec 5, 2025:** Frontend dev server running successfully on port 3000
- **Dec 5, 2025:** Implemented tabbed interface for multiple log files
  - Chrome-like tabs with add/close functionality
  - Each tab is independent with its own state
  - Tab titles automatically update to filename
- **Dec 5, 2025:** Refined tab UI (40% smaller, softer corners)
- **Dec 5, 2025:** Backend WebSocket implementation working
  - Fixed message types (initial/lines) to match frontend
  - Increased buffer size to 10MB for long log lines
  - File watcher successfully reading and streaming logs
- **Dec 5, 2025:** UI improvements
  - Added resizable panes with draggable divider
  - Implemented horizontal scrolling for long log lines
  - Fixed areas to maintain size when loading files
  - Used ResizeObserver for proper container sizing

## Current Status
- Go backend server running on localhost:8080
- Vite dev server running on localhost:3000 with proxy to backend
- WebSocket connection established between frontend and backend
- Log files successfully loading and displaying
- Virtual scrolling working with react-window
- Resizable panes working (drag to adjust bottom pane size)
- Horizontal scrolling enabled for long lines

## Next Steps / TODOs
- Implement real-time file watching (new lines appearing)
- Add file browser/selector for easier file selection
- Build production bundle and embed in Go binary
- Add syntax highlighting for log files (optional)
- Test on Windows and Linux
- Handle log file rotation
- Add "clear" button to reset log view
- Persist tab state (remember open files)

## Development Commands
```bash
# Install dependencies
go mod download

# Run in development
go run ./cmd

# Build
go build -o weblogview ./cmd

# Run with options
./weblogview -port 8080 -host localhost -no-browser
```

## Notes
- Project is in development phase
- Currently working on macOS environment
